---
http_interactions:
- request:
    method: get
    uri: http://localhost:9200/
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - 'opensearch-ruby/1.0.0 (RUBY_VERSION: 2.7.5; darwin x86_64; Faraday v1.10.0)'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '349'
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "name" : "8fa7deb19b36",
          "cluster_name" : "docker-cluster",
          "cluster_uuid" : "HIwmyPg1T126293eDbQXLA",
          "version" : {
            "distribution" : "opensearch",
            "number" : "1.2.4",
            "build_type" : "tar",
            "build_hash" : "e505b10357c03ae8d26d675172402f2f2144ef0f",
            "build_date" : "2022-01-14T03:38:06.881862Z",
            "build_snapshot" : false,
            "lucene_version" : "8.10.1",
            "minimum_wire_compatibility_version" : "6.8.0",
            "minimum_index_compatibility_version" : "6.0.0-beta1"
          },
          "tagline" : "The OpenSearch Project: https://opensearch.org/"
        }
  recorded_at: Thu, 19 May 2022 21:00:31 GMT
- request:
    method: post
    uri: http://localhost:9200/timdex-prod/_search
    body:
      encoding: UTF-8
      string: '{"from":0,"size":20,"query":{"bool":{"should":null,"must":[{"match":{"title":"spice"}}],"filter":[]}},"aggregations":{"collections":{"terms":{"field":"collections.keyword"}},"contributors":{"nested":{"path":"contributors"},"aggs":{"contributor_names":{"terms":{"field":"contributors.value.keyword"}}}},"content_type":{"terms":{"field":"content_type"}},"content_format":{"terms":{"field":"format"}},"languages":{"terms":{"field":"languages.keyword"}},"literary_form":{"terms":{"field":"literary_form"}},"source":{"terms":{"field":"source"}},"subjects":{"nested":{"path":"subjects"},"aggs":{"subject_names":{"terms":{"field":"subjects.value.keyword"}}}}}}'
    headers:
      User-Agent:
      - 'opensearch-ruby/1.0.0 (RUBY_VERSION: 2.7.5; darwin x86_64; Faraday v1.10.0)'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '1507'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJ0b29rIjozLCJ0aW1lZF9vdXQiOmZhbHNlLCJfc2hhcmRzIjp7InRvdGFsIjoxLCJzdWNjZXNzZnVsIjoxLCJza2lwcGVkIjowLCJmYWlsZWQiOjB9LCJoaXRzIjp7InRvdGFsIjp7InZhbHVlIjoxLCJyZWxhdGlvbiI6ImVxIn0sIm1heF9zY29yZSI6MS41MjcxNTI3LCJoaXRzIjpbeyJfaW5kZXgiOiJtYXJpby0yMDIyLTA1LTAydDE5LTQzLTAweiIsIl90eXBlIjoiX2RvYyIsIl9pZCI6Im1pdDphbG1hOjk5MDAyNjY3MTUwMDIwNjc2MSIsIl9zY29yZSI6MS41MjcxNTI3LCJfc291cmNlIjp7ImFsdGVybmF0ZV90aXRsZXMiOlt7ImtpbmQiOiJBbHRlcm5hdGUgdGl0bGUiLCJ2YWx1ZSI6IkJlc3Qgb2YgUGFxdWl0byBEJ1JpdmVyYSJ9XSwiY2FsbF9udW1iZXJzIjpbIjc4MS42NTciXSwiY2l0YXRpb24iOiJEJ1JpdmVyYSwgUGFxdWl0byBldCBhbC4gMjAwOC4gUG9ydHJhaXRzIG9mIEN1YmEiLCJjb250ZW50X3R5cGUiOlsiU291bmQgcmVjb3JkaW5nIl0sImNvbnRlbnRzIjpbIkNodWNobyAtLSBIYXZhbmEgY2FmZSAtLSBUaGUgcGVhbnV0IHZlbmRvciAtLSBBIG5pZ2h0IGluIFR1bmlzaWEgLS0gTWFtYm8gYSBsYSBLZW50b24gLS0gRWNoYWxlIHNhbHNpdGEgLS0gRHJ1bWUgbmVncml0YSAtLSBUcm9waWNhbmEgbmlnaHRzIC0tIFdobydzIHNtb2tpbmcgLS0gVGljbyB0aWNvIC0tIFBvcnRyYWl0cyBvZiBDdWJhIC0tIEV4Y2VycHQgZnJvbSBBaXJlcyB0cm9waWNhbGVzIC0tIFdoYXQgYXJlIHlvdSBkb2luZyB0b21vcnJvdyBuaWdodCAtLSBBIG1pIHF1ZS9FbCBtYW5pc2Vyby4iXSwiY29udHJpYnV0b3JzIjpbeyJraW5kIjoiYXV0aG9yIiwidmFsdWUiOiJEJ1JpdmVyYSwgUGFxdWl0bywgMTk0OC0ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiRCdSaXZlcmEsIFBhcXVpdG8sIDE5NDgtIn0seyJraW5kIjoiY29udHJpYnV0b3IiLCJ2YWx1ZSI6IlDDqXJleiwgRGFuaWxvLiJ9LHsia2luZCI6ImNvbnRyaWJ1dG9yIiwidmFsdWUiOiJHaWxiZXJ0LCBXb2xmZS4ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiR2lsbGVzcGllLCBEaXp6eSwgMTkxNy0xOTkzLiJ9LHsia2luZCI6ImNvbnRyaWJ1dG9yIiwidmFsdWUiOiJQw6lyZXogUHJhZG8sIDE5MTYtMTk4OS4ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiUGnDsWVpcm8sIElnbmFjaW8sIDE4ODgtMTk2OS4ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiR3JlbmV0LCBFcm5lc3RvIFdvb2QuIn0seyJraW5kIjoiY29udHJpYnV0b3IiLCJ2YWx1ZSI6IlJvZGl0aSwgQ2xhdWRpby4ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiQWJyZXUsIFplcXVpbmhhIGRlLCAxODgwLTE5MzUuIn0seyJraW5kIjoiY29udHJpYnV0b3IiLCJ2YWx1ZSI6IkdvZG95LCBMdWNpby4ifSx7ImtpbmQiOiJjb250cmlidXRvciIsInZhbHVlIjoiSGVybsOhbmRleiwgUmFmYWVsLiJ9XSwiZGF0ZXMiOlt7ImtpbmQiOiJEYXRlIG9mIHB1YmxpY2F0aW9uIiwidmFsdWUiOiIyMDA4In1dLCJpZGVudGlmaWVycyI6W3sia2luZCI6Im9jbGMiLCJ2YWx1ZSI6IjgxMTU0OTU2MiJ9XSwibGFuZ3VhZ2VzIjpbIk5vIGxpbmd1aXN0aWMgY29udGVudCJdLCJsaW5rcyI6W3sia2luZCI6IkRpZ2l0YWwgb2JqZWN0IGxpbmsiLCJ0ZXh0IjoiTmF4b3MgTXVzaWMgTGlicmFyeSIsInVybCI6Imh0dHA6Ly9CTENNSVQuTmF4b3NNdXNpY0xpYnJhcnkuY29tL2NhdGFsb2d1ZS9pdGVtLmFzcD9jaWQ9SkQtMzQyIn1dLCJsb2NhdGlvbnMiOlt7ImtpbmQiOiJQbGFjZSBvZiBwdWJsaWNhdGlvbiIsInZhbHVlIjoiTmV3IFlvcmsgKFN0YXRlKSJ9XSwibm90ZXMiOlt7InZhbHVlIjpbIlBhcXVpdG8gZCcgUml2ZXJhLCBzYXhvcGhvbmUgOyBQYXF1aXRvIGQnIFJpdmVyYSwgc29wcmFubyBzYXhvcGhvbmUuIiwiRGVzY3JpcHRpb24gYmFzZWQgb24gaGFyZCBjb3B5IHZlcnNpb24gcmVjb3JkLiJdfV0sInBoeXNpY2FsX2Rlc2NyaXB0aW9uIjoiMSBvbmxpbmUgcmVzb3VyY2UgKDEgc291bmQgZmlsZSkiLCJwdWJsaWNhdGlvbl9pbmZvcm1hdGlvbiI6WyJbTmV3IFlvcmssIE4uWS5dIDogQ2hlc2t5IFJlY29yZHMsIHAyMDA4LiJdLCJzb3VyY2UiOiJNSVQgQWxtYSIsInNvdXJjZV9saW5rIjoiaHR0cHM6Ly9taXQucHJpbW8uZXhsaWJyaXNncm91cC5jb20vZGlzY292ZXJ5L2Z1bGxkaXNwbGF5P3ZpZD0wMU1JVF9JTlNUOk1JVFx1MDAyNmRvY2lkPWFsbWE5OTAwMjY2NzE1MDAyMDY3NjEiLCJzdWJqZWN0cyI6W3sidmFsdWUiOlsiSmF6ei4iLCJMYXRpbiBqYXp6LiIsIkNsYXJpbmV0IG11c2ljIChKYXp6KSIsIlNheG9waG9uZSBtdXNpYyAoSmF6eikiXX1dLCJ0aW1kZXhfcmVjb3JkX2lkIjoibWl0OmFsbWE6OTkwMDI2NjcxNTAwMjA2NzYxIiwidGl0bGUiOiJTcGljZSBpdCB1cCEgdGhlIGJlc3Qgb2YgUGFxdWl0byBEJ1JpdmVyYS4ifX1dfSwiYWdncmVnYXRpb25zIjp7Imxhbmd1YWdlcyI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjAsImJ1Y2tldHMiOlt7ImtleSI6Im5vIGxpbmd1aXN0aWMgY29udGVudCIsImRvY19jb3VudCI6MX1dfSwiY29udGVudF90eXBlIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5Ijoic291bmQgcmVjb3JkaW5nIiwiZG9jX2NvdW50IjoxfV19LCJjb2xsZWN0aW9ucyI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjAsImJ1Y2tldHMiOltdfSwic3ViamVjdHMiOnsiZG9jX2NvdW50IjoxLCJzdWJqZWN0X25hbWVzIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5IjoiY2xhcmluZXQgbXVzaWMgKGphenopIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6ImphenouIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6ImxhdGluIGphenouIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6InNheG9waG9uZSBtdXNpYyAoamF6eikiLCJkb2NfY291bnQiOjF9XX19LCJjb250ZW50X2Zvcm1hdCI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjAsImJ1Y2tldHMiOltdfSwibGl0ZXJhcnlfZm9ybSI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjAsImJ1Y2tldHMiOltdfSwic291cmNlIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5IjoibWl0IGFsbWEiLCJkb2NfY291bnQiOjF9XX0sImNvbnRyaWJ1dG9ycyI6eyJkb2NfY291bnQiOjEyLCJjb250cmlidXRvcl9uYW1lcyI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjEsImJ1Y2tldHMiOlt7ImtleSI6ImQncml2ZXJhLCBwYXF1aXRvLCAxOTQ4LSIsImRvY19jb3VudCI6Mn0seyJrZXkiOiJhYnJldSwgemVxdWluaGEgZGUsIDE4ODAtMTkzNS4iLCJkb2NfY291bnQiOjF9LHsia2V5IjoiZ2lsYmVydCwgd29sZmUuIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6ImdpbGxlc3BpZSwgZGl6enksIDE5MTctMTk5My4iLCJkb2NfY291bnQiOjF9LHsia2V5IjoiZ29kb3ksIGx1Y2lvLiIsImRvY19jb3VudCI6MX0seyJrZXkiOiJncmVuZXQsIGVybmVzdG8gd29vZC4iLCJkb2NfY291bnQiOjF9LHsia2V5IjoiaGVybsOhbmRleiwgcmFmYWVsLiIsImRvY19jb3VudCI6MX0seyJrZXkiOiJwacOxZWlybywgaWduYWNpbywgMTg4OC0xOTY5LiIsImRvY19jb3VudCI6MX0seyJrZXkiOiJww6lyZXogcHJhZG8sIDE5MTYtMTk4OS4iLCJkb2NfY291bnQiOjF9LHsia2V5IjoicMOpcmV6LCBkYW5pbG8uIiwiZG9jX2NvdW50IjoxfV19fX19
  recorded_at: Thu, 19 May 2022 21:00:31 GMT
recorded_with: VCR 6.1.0
