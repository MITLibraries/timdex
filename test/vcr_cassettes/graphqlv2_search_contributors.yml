---
http_interactions:
- request:
    method: get
    uri: http://localhost:9200/
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - 'opensearch-ruby/1.0.0 (RUBY_VERSION: 2.7.5; darwin x86_64; Faraday v1.10.0)'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '349'
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "name" : "8fa7deb19b36",
          "cluster_name" : "docker-cluster",
          "cluster_uuid" : "HIwmyPg1T126293eDbQXLA",
          "version" : {
            "distribution" : "opensearch",
            "number" : "1.2.4",
            "build_type" : "tar",
            "build_hash" : "e505b10357c03ae8d26d675172402f2f2144ef0f",
            "build_date" : "2022-01-14T03:38:06.881862Z",
            "build_snapshot" : false,
            "lucene_version" : "8.10.1",
            "minimum_wire_compatibility_version" : "6.8.0",
            "minimum_index_compatibility_version" : "6.0.0-beta1"
          },
          "tagline" : "The OpenSearch Project: https://opensearch.org/"
        }
  recorded_at: Tue, 24 May 2022 15:36:04 GMT
- request:
    method: post
    uri: http://localhost:9200/timdex-prod/_search
    body:
      encoding: UTF-8
      string: '{"from":"0","size":20,"query":{"bool":{"should":null,"must":[{"nested":{"path":"contributors","query":{"bool":{"must":[{"match":{"contributors.value":"moon"}}]}}}}],"filter":[]}},"aggregations":{"collections":{"terms":{"field":"collections.keyword"}},"contributors":{"nested":{"path":"contributors"},"aggs":{"contributor_names":{"terms":{"field":"contributors.value.keyword"}}}},"content_type":{"terms":{"field":"content_type"}},"content_format":{"terms":{"field":"format"}},"languages":{"terms":{"field":"languages.keyword"}},"literary_form":{"terms":{"field":"literary_form"}},"source":{"terms":{"field":"source"}},"subjects":{"nested":{"path":"subjects"},"aggs":{"subject_names":{"terms":{"field":"subjects.value.keyword"}}}}}}'
    headers:
      User-Agent:
      - 'opensearch-ruby/1.0.0 (RUBY_VERSION: 2.7.5; darwin x86_64; Faraday v1.10.0)'
      Content-Type:
      - application/json
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '1894'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJ0b29rIjo1LCJ0aW1lZF9vdXQiOmZhbHNlLCJfc2hhcmRzIjp7InRvdGFsIjoxLCJzdWNjZXNzZnVsIjoxLCJza2lwcGVkIjowLCJmYWlsZWQiOjB9LCJoaXRzIjp7InRvdGFsIjp7InZhbHVlIjoxLCJyZWxhdGlvbiI6ImVxIn0sIm1heF9zY29yZSI6My40ODk2NzU4LCJoaXRzIjpbeyJfaW5kZXgiOiJtYXJpby0yMDIyLTA1LTAydDE5LTQzLTAweiIsIl90eXBlIjoiX2RvYyIsIl9pZCI6Im1pdDpkc3BhY2U6MTcyMS4xLTExMzU2NiIsIl9zY29yZSI6My40ODk2NzU4LCJfc291cmNlIjp7ImNpdGF0aW9uIjoiUmFuanJhbSwgTWlrZSBLLiwgSW50YWUgTW9vbiwgYW5kIERhdmlkIEouIFBlcnJlYXVsdC4gJ1ZhcmlhYmxlLUludmVydGVyLVJlY3RpZmllci1UcmFuc2Zvcm1lcjogQSBIeWJyaWQgRWxlY3Ryb25pYyBhbmQgTWFnbmV0aWMgU3RydWN0dXJlIEVuYWJsaW5nXHUwMDI2IzEzOyBBZGp1c3RhYmxlIEhpZ2ggU3RlcC1Eb3duIENvbnZlcnNpb24gUmF0aW9zLicgMjAxNyBJRUVFIFdvcmtzaG9wIG9uIENvbnRyb2wgYW5kIE1vZGVsaW5nIGZvciBQb3dlciBFbGVjdHJvbmljcyAoQ09NUEVMIDE3KSwgOS0xMiBKdWx5LCAyMDE3LCBTdGFuZm9yZCwgQ2FsaWZvcm5pYSwgSUVFRSwgMjAxNy4iLCJjb250ZW50X3R5cGUiOlsiQXJ0aWNsZSIsIkNvbmZlcmVuY2UgcGFwZXIiXSwiY29udHJpYnV0b3JzIjpbeyJhZmZpbGlhdGlvbiI6Ik1JVCIsImtpbmQiOiJhdXRob3IiLCJtaXRfYWZmaWxpYXRlZCI6dHJ1ZSwidmFsdWUiOiJNb29uLCBJbnRhZSJ9LHsiYWZmaWxpYXRpb24iOiJNSVQiLCJraW5kIjoiYXV0aG9yIiwibWl0X2FmZmlsaWF0ZWQiOnRydWUsInZhbHVlIjoiUmFuanJhbSwgTWlrZSBLYXZpYW4ifSx7ImFmZmlsaWF0aW9uIjoiTUlUIiwia2luZCI6ImF1dGhvciIsImlkZW50aWZpZXIiOiJodHRwczovL29yY2lkLm9yZy8wMDAwLTAwMDItMDc0Ni02MTkxIiwibWl0X2FmZmlsaWF0ZWQiOnRydWUsInZhbHVlIjoiUGVycmVhdWx0LCBEYXZpZCBKIn0seyJraW5kIjoiZGVwYXJ0bWVudCIsInZhbHVlIjoiTWFzc2FjaHVzZXR0cyBJbnN0aXR1dGUgb2YgVGVjaG5vbG9neS4gRGVwYXJ0bWVudCBvZiBFbGVjdHJpY2FsIEVuZ2luZWVyaW5nIGFuZCBDb21wdXRlciBTY2llbmNlIn0seyJraW5kIjoiYXBwcm92ZXIiLCJ2YWx1ZSI6IlBlcnJlYXVsdCwgRGF2aWQgSi4ifV0sImRhdGVzIjpbeyJraW5kIjoiRGF0ZSBhY2Nlc3Npb25lZCIsInZhbHVlIjoiMjAxOC0wMi0xMlQxNToyNDoxN1oifSx7ImtpbmQiOiJEYXRlIGF2YWlsYWJsZSIsInZhbHVlIjoiMjAxOC0wMi0xMlQxNToyNDoxN1oifSx7ImtpbmQiOiJEYXRlIG9mIHB1YmxpY2F0aW9uIiwidmFsdWUiOiIyMDE3LTA4In1dLCJmaWxlX2Zvcm1hdHMiOlsiYXBwbGljYXRpb24vcGRmIiwidGV4dC9wbGFpbiJdLCJmb3JtYXQiOiJFbGVjdHJvbmljIHJlc291cmNlIiwiZnVuZGluZ19pbmZvcm1hdGlvbiI6W3siYXdhcmRfbnVtYmVyIjoiMTYwOTI0MCIsImZ1bmRlcl9uYW1lIjoiTmF0aW9uYWwgU2NpZW5jZSBGb3VuZGF0aW9uIChVLlMuKSJ9LHsiZnVuZGVyX25hbWUiOiJUZXhhcyBJbnN0cnVtZW50cyBJbmNvcnBvcmF0ZWQifSx7ImZ1bmRlcl9uYW1lIjoiRnV0dXJld2VpIFRlY2hub2xvZ2llcywgSW5jLiJ9LHsiZnVuZGVyX25hbWUiOiJNYXNzYWNodXNldHRzIEluc3RpdHV0ZSBvZiBUZWNobm9sb2d5LiBDZW50ZXIgZm9yIEludGVncmF0ZWQgQ2lyY3VpdHMgYW5kIFN5c3RlbXMifV0sImlkZW50aWZpZXJzIjpbeyJraW5kIjoiaXNibiIsInZhbHVlIjoiOTc4MTUwOTA1MzI3OCJ9LHsia2luZCI6InVyaSIsInZhbHVlIjoiaHR0cDovL2hkbC5oYW5kbGUubmV0LzE3MjEuMS8xMTM1NjYifV0sImxhbmd1YWdlcyI6WyJFbmdsaXNoIl0sImxpbmtzIjpbeyJraW5kIjoiRGlnaXRhbCBvYmplY3QgbGluayIsInVybCI6Imh0dHA6Ly9oZGwuaGFuZGxlLm5ldC8xNzIxLjEvMTEzNTY2In1dLCJyZWxhdGVkX2l0ZW1zIjpbeyJyZWxhdGlvbnNoaXAiOiJJcyBwYXJ0IG9mIiwidXJpIjoiaHR0cHM6Ly9kc3BhY2UubWl0LmVkdS9oYW5kbGUvMTcyMS4xLzQ5NDMyIn0seyJyZWxhdGlvbnNoaXAiOiJJcyBwYXJ0IG9mIiwidXJpIjoiaHR0cHM6Ly9kc3BhY2UubWl0LmVkdS9oYW5kbGUvMTcyMS4xLzQ5NDMzIn0seyJyZWxhdGlvbnNoaXAiOiJJcyB2ZXJzaW9uIG9mIiwidXJpIjoiaHR0cDovL2R4LmRvaS5vcmcvMTAuMTEwOS9DT01QRUwuMjAxNy44MDEzMzUwIn0seyJyZWxhdGlvbnNoaXAiOiJQdWJsaXNoZWQgaW4iLCJ1cmkiOiJodHRwOi8vZHguZG9pLm9yZy8xMC4xMTA5L0NPTVBFTC4yMDE3LjgwMTMzNTAifV0sInJpZ2h0cyI6W3sia2luZCI6IlRlcm1zIG9mIHVzZSIsInVyaSI6Imh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1uYy1zYS8zLjAvIn1dLCJzb3VyY2UiOiIiLCJzb3VyY2VfbGluayI6IiIsInN1bW1hcnkiOlsiVGhpcyBwYXBlciBwcm9wb3NlcyBhIGh5YnJpZCBlbGVjdHJvbmljIGFuZCBtYWduZXRpYyBzdHJ1Y3R1cmUgdGhhdCBlbmFibGVzIHRyYW5zZm9ybWVycyB3aXRoIOKAnGZyYWN0aW9uYWzigJ0gYW5kIHJlY29uZmlndXJhYmxlIHR1cm5zIHJhdGlvcyAoZS5nLiAxMjowLjUsIDEyOjEsIDEyOjIpLiBUaGlzIGZ1bmN0aW9uYWxpdHkgaXMgdmFsdWFibGUgaW4gY29udmVydGVycyB3aXRoIHdpZGUgb3BlcmF0aW5nIHZvbHRhZ2UgcmFuZ2VzIGFuZCBoaWdoIHN0ZXAtdXAvZG93biwgYXMgaXQgb2ZmZXJzIGEgbWVhbnMgdG8gcmVkdWNlIGNvcHBlciBsb3NzIHdpdGhpbiB0aGUgdHJhbnNmb3JtZXIgd2hpbGUgYWxzbyBmYWNpbGl0YXRpbmcgdm9sdGFnZSBkb3VibGluZyBhbmQgcXVhZHJ1cGxpbmcuIFdlIGludHJvZHVjZSB0aGUgcHJpbmNpcGxlIG9mIG9wZXJhdGlvbiBvZiB0aGUgc3RydWN0dXJlIGFuZCBwcmVzZW50IG1vZGVscyBmb3IgaXRzIG1hZ25ldGljIGFuZCBlbGVjdHJpY2FsIGJlaGF2aW91ci4gQW4gZXhwZXJpbWVudGFsIHByb3RvdHlwZSBjYXBhYmxlIG9mIGFjY29tbW9kYXRpbmcgYSB3aWRlbHkgdmFyeWluZyBpbnB1dCAoMTIwLTM4MFtzdWJzY3JpcHQgVmRjXSkgYW5kIG91dHB1dCAoNSwgOSwgMTJWKSB2YWxpZGF0ZXMgdGhlIG9wZXJhdGluZyBwcmluY2lwbGUgYW5kIG1vZGVsbGluZyBvZiB0aGUgcHJvcG9zZWQgc3RydWN0dXJlIGFuZCBhY2hpZXZlcyBjb252ZXJzaW9uIGVmZmljaWVuY2llcyBiZXR3ZWVuIDkzLjQlIGFuZFx1MDAyNiMxMzsgOTUuNyUgYXQgMjUtMzYgVy4iXSwidGltZGV4X3JlY29yZF9pZCI6Im1pdDpkc3BhY2U6MTcyMS4xLTExMzU2NiIsInRpdGxlIjoiVmFyaWFibGUtSW52ZXJ0ZXItUmVjdGlmaWVyLVRyYW5zZm9ybWVyOiBBIEh5YnJpZCBFbGVjdHJvbmljIGFuZCBNYWduZXRpYyBTdHJ1Y3R1cmUgRW5hYmxpbmcgQWRqdXN0YWJsZSBIaWdoIFN0ZXAtRG93biBDb252ZXJzaW9uIFJhdGlvcyJ9fV19LCJhZ2dyZWdhdGlvbnMiOnsibGFuZ3VhZ2VzIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5IjoiZW5nbGlzaCIsImRvY19jb3VudCI6MX1dfSwiY29udGVudF90eXBlIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5IjoiYXJ0aWNsZSIsImRvY19jb3VudCI6MX0seyJrZXkiOiJjb25mZXJlbmNlIHBhcGVyIiwiZG9jX2NvdW50IjoxfV19LCJjb2xsZWN0aW9ucyI6eyJkb2NfY291bnRfZXJyb3JfdXBwZXJfYm91bmQiOjAsInN1bV9vdGhlcl9kb2NfY291bnQiOjAsImJ1Y2tldHMiOltdfSwic3ViamVjdHMiOnsiZG9jX2NvdW50IjowLCJzdWJqZWN0X25hbWVzIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W119fSwiY29udGVudF9mb3JtYXQiOnsiZG9jX2NvdW50X2Vycm9yX3VwcGVyX2JvdW5kIjowLCJzdW1fb3RoZXJfZG9jX2NvdW50IjowLCJidWNrZXRzIjpbeyJrZXkiOiJlbGVjdHJvbmljIHJlc291cmNlIiwiZG9jX2NvdW50IjoxfV19LCJsaXRlcmFyeV9mb3JtIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W119LCJzb3VyY2UiOnsiZG9jX2NvdW50X2Vycm9yX3VwcGVyX2JvdW5kIjowLCJzdW1fb3RoZXJfZG9jX2NvdW50IjowLCJidWNrZXRzIjpbeyJrZXkiOiIiLCJkb2NfY291bnQiOjF9XX0sImNvbnRyaWJ1dG9ycyI6eyJkb2NfY291bnQiOjUsImNvbnRyaWJ1dG9yX25hbWVzIjp7ImRvY19jb3VudF9lcnJvcl91cHBlcl9ib3VuZCI6MCwic3VtX290aGVyX2RvY19jb3VudCI6MCwiYnVja2V0cyI6W3sia2V5IjoibWFzc2FjaHVzZXR0cyBpbnN0aXR1dGUgb2YgdGVjaG5vbG9neS4gZGVwYXJ0bWVudCBvZiBlbGVjdHJpY2FsIGVuZ2luZWVyaW5nIGFuZCBjb21wdXRlciBzY2llbmNlIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6Im1vb24sIGludGFlIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6InBlcnJlYXVsdCwgZGF2aWQgaiIsImRvY19jb3VudCI6MX0seyJrZXkiOiJwZXJyZWF1bHQsIGRhdmlkIGouIiwiZG9jX2NvdW50IjoxfSx7ImtleSI6InJhbmpyYW0sIG1pa2Uga2F2aWFuIiwiZG9jX2NvdW50IjoxfV19fX19
  recorded_at: Tue, 24 May 2022 15:36:04 GMT
recorded_with: VCR 6.1.0
